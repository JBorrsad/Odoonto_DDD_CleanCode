{
  "name": "DDD-check-cross-layer-consistency",
  "category": "check",
  "description": "Verificar la consistencia entre las diferentes capas DDD",
  "doc": "../../docs/DDD_Core_Guide.md",
  "filePattern": "src/**/*.cs",
  "afterCommit": true,
  "check": [
    {
      "pattern": "src/Domain/[^/]+/Models/([A-Za-z]+)/([A-Za-z]+)\\.cs$",
      "message": "Entidad de dominio sin interfaz de repositorio correspondiente",
      "severity": "warning",
      "advice": "Para cada entidad de dominio debe existir una interfaz de repositorio correspondiente (I{Entity}Repository). Verifica que existe src/Domain/*/Repositories/I$2Repository.cs. Si no existe, crea la interfaz de repositorio siguiendo el patrón de IRepository<T> con métodos específicos para esa entidad.\n\nConsulta el ejemplo en DDD_Ejemplos_Codigo/2_Domain_Repository_Interface.cs"
    },
    {
      "pattern": "src/Domain/[^/]+/Repositories/I([A-Za-z]+)Repository\\.cs$",
      "message": "Interfaz de repositorio sin implementación correspondiente",
      "severity": "warning",
      "advice": "Para cada interfaz de repositorio debe existir una implementación concreta en la capa de Datos. Verifica que existe src/Data/*/Repositories/$1Repository.cs. Si no existe, crea la implementación siguiendo el patrón en DDD_Ejemplos_Codigo/3_Data_Repository_Implementation.cs"
    },
    {
      "pattern": "src/Data/[^/]+/Repositories/([A-Za-z]+)Repository\\.cs$",
      "message": "Repositorio sin configuración de mapeo correspondiente",
      "severity": "info",
      "advice": "Para cada repositorio concreto, debe existir una configuración de mapeo en la capa de Datos. Verifica que existe src/Data/*/Configurations/$1Configuration.cs. Si no existe, considera crear esta configuración para separar la lógica de mapeo del repositorio. Consulta el ejemplo en DDD_Ejemplos_Codigo/16_Data_Core_Firebase_Context.cs"
    },
    {
      "pattern": "src/Domain/[^/]+/Models/([A-Za-z]+)/([A-Za-z]+)\\.cs$",
      "message": "Entidad de dominio sin DTO correspondiente",
      "severity": "info",
      "advice": "Para cada entidad de dominio que se exponga a capas externas, debe existir un DTO correspondiente. Verifica que existe src/Application/*/DTOs/$1/$2Dto.cs. Si no existe y la entidad requiere ser expuesta, crea el DTO y su perfil de mapeo.\n\nConsulta el ejemplo en DDD_Ejemplos_Codigo/5_Application_DTO.cs"
    },
    {
      "pattern": "src/Domain/[^/]+/Models/([A-Za-z]+)/([A-Za-z]+)\\.cs$",
      "message": "Entidad de dominio sin servicio de aplicación correspondiente",
      "severity": "info",
      "advice": "Para cada entidad principal, considera si necesita un servicio de aplicación. Verifica que existe src/Application/*/Services/$2Service.cs. Los servicios de aplicación orquestan operaciones complejas sobre entidades.\n\nConsulta el ejemplo en DDD_Ejemplos_Codigo/6_Application_Service.cs"
    },
    {
      "pattern": "src/Data/[^/]+/Repositories/([A-Za-z]+)Repository\\.cs$",
      "message": "Repositorio no registrado en la inyección de dependencias",
      "severity": "warning",
      "advice": "Cada repositorio debe estar registrado en el inyector de dependencias. Verifica que en src/Infrastructure/*/DependencyInyector.cs existe un método para registrar este repositorio. Si no existe, asegúrate de agregar el registro del repositorio.\n\nConsulta el ejemplo en DDD_Ejemplos_Codigo/10_Infrastructure_Inyector.cs"
    }
  ]
} 