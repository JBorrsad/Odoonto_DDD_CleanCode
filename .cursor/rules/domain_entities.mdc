---
description: 
globs: 
alwaysApply: true
---
# Entidades del Dominio Odontológico

## 1. Entidades Principales

### 1.1. Patient (Paciente)

**Descripción**: Representa a una persona que recibe atención dental.

**Propiedades**:
- Id: Identificador único (Guid)
- Name: Nombre completo
- BirthDate: Fecha de nacimiento
- PhoneNumber: Número de teléfono
- Email: Correo electrónico
- Address: Dirección
- MedicalHistory: Historia médica relevante
- Appointments: Colección de citas programadas
- Treatments: Tratamientos planificados o realizados
- Odontogram: Mapa dental del paciente

**Métodos**:
- AddAppointment: Agrega una cita al paciente
- AddTreatment: Agrega un tratamiento al paciente
- UpdateOdontogram: Actualiza el mapa dental

### 1.2. Doctor (Médico)

**Descripción**: Profesional médico que realiza procedimientos dentales.

**Propiedades**:
- Id: Identificador único (Guid)
- Name: Nombre completo
- Specialty: Especialidad médica
- LicenseNumber: Número de licencia profesional
- PhoneNumber: Número de teléfono
- Email: Correo electrónico
- WorkingSchedule: Horario de trabajo
- Appointments: Citas asignadas

**Métodos**:
- SetWorkingSchedule: Establece horario de trabajo
- AssignAppointment: Asigna una cita
- RemoveAppointment: Elimina una cita asignada

### 1.3. Treatment (Tratamiento)

**Descripción**: Procedimiento dental que se realiza a un paciente.

**Propiedades**:
- Id: Identificador único (Guid)
- Name: Nombre del tratamiento
- Description: Descripción detallada
- Duration: Duración estimada (minutos)
- Price: Precio base
- Category: Categoría del tratamiento
- RequiredTeeth: Dientes involucrados en el tratamiento

**Métodos**:
- SetPrice: Establece el precio
- AddTeeth: Agrega dientes al tratamiento
- RemoveTeeth: Quita dientes del tratamiento

### 1.4. Appointment (Cita)

**Descripción**: Reserva de tiempo para atención de un paciente.

**Propiedades**:
- Id: Identificador único (Guid)
- PatientId: ID del paciente
- DoctorId: ID del doctor
- Date: Fecha y hora de la cita
- Duration: Duración programada
- Status: Estado (Programada, Completada, Cancelada)
- TreatmentId: ID del tratamiento a realizar
- Notes: Notas adicionales

**Métodos**:
- Reschedule: Reprograma la cita
- Cancel: Cancela la cita
- Complete: Marca la cita como completada
- AddNotes: Agrega notas a la cita

### 1.5. Odontogram (Odontograma)

**Descripción**: Mapa dental que registra el estado de cada diente.

**Propiedades**:
- Id: Identificador único (Guid)
- PatientId: ID del paciente asociado
- Teeth: Colección de dientes con su estado
- LastUpdated: Última actualización

**Métodos**:
- UpdateTooth: Actualiza el estado de un diente
- MarkTreatment: Marca un tratamiento realizado
- MarkDisease: Marca una enfermedad en un diente

## 2. Entidades Auxiliares

### 2.1. Tooth (Diente)

**Descripción**: Representa un diente en el odontograma.

**Propiedades**:
- Number: Número del diente (1-32)
- Status: Estado actual (Sano, Cariado, Extraído, etc.)
- Treatments: Tratamientos aplicados
- Diseases: Enfermedades detectadas
- Surfaces: Superficies del diente (Oclusal, Lingual, etc.)

**Métodos**:
- SetStatus: Establece el estado
- AddTreatment: Agrega un tratamiento
- AddDisease: Agrega una enfermedad

### 2.2. WorkingDay (Día Laboral)

**Descripción**: Día laboral de un doctor con sus horas disponibles.

**Propiedades**:
- DoctorId: ID del doctor
- DayOfWeek: Día de la semana
- StartTime: Hora de inicio
- EndTime: Hora de fin
- BreakStart: Inicio de descanso
- BreakEnd: Fin de descanso

**Métodos**:
- SetWorkingHours: Establece horas de trabajo
- SetBreakTime: Establece tiempo de descanso
- IsTimeSlotAvailable: Verifica disponibilidad

## 3. Relaciones Entre Entidades

1. **Paciente - Cita**: Un paciente puede tener muchas citas
2. **Doctor - Cita**: Un doctor puede tener muchas citas
3. **Tratamiento - Cita**: Una cita está asociada a un tratamiento
4. **Paciente - Odontograma**: Un paciente tiene un odontograma
5. **Odontograma - Diente**: Un odontograma contiene muchos dientes
6. **Doctor - Día Laboral**: Un doctor tiene múltiples días laborales

## 4. Reglas de Negocio Importantes

1. No se pueden programar dos citas para el mismo doctor en el mismo horario
2. Las citas deben estar dentro del horario de trabajo del doctor
3. El tiempo de la cita debe ser suficiente para el tratamiento asociado
4. Un odontograma debe pertenecer a un solo paciente
5. Los tratamientos aplicados deben registrarse en el odontograma
6. Las citas canceladas deben tener un motivo de cancelación

## 5. Value Objects

### 5.1. Address (Dirección)
- Street: Calle
- City: Ciudad
- State: Estado/Provincia
- ZipCode: Código postal
- Country: País

### 5.2. TimeSlot (Franja Horaria)
- Start: Hora de inicio
- End: Hora de fin
- Duration: Duración en minutos

### 5.3. ToothSurface (Superficie del Diente)
- Position: Posición (Oclusal, Vestibular, Mesial, Distal, Lingual)
- Status: Estado de la superficie
